<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <title>Terrdog420 - Purple Hunter Edition</title>
    
    <style>
        /* ==========================================
           CSS: STYLING & PURPLE THEME
           ========================================== */
        @import url(https://fonts.googleapis.com/css?family=Roboto:700,900);

        * { box-sizing: border-box; }

        html, body { 
            height: 100%; width: 100%; margin: 0; padding: 0; 
            overflow: hidden; background: transparent; 
            font-family: 'Roboto', sans-serif; 
        }

        /* Tribute Bar: January Only */
        #tribute-bar {
            display: none; 
            position: absolute; top: 0; left: 50%; transform: translateX(-50%);
            align-items: center; gap: 20px;
            background: linear-gradient(180deg, rgba(40,0,60,0.98) 0%, rgba(0,0,0,0.95) 100%); 
            padding: 12px 40px; border-bottom: 4px solid #A020F0; border-radius: 0 0 20px 20px;
            color: white; z-index: 1000; box-shadow: 0 0 20px rgba(160, 32, 240, 0.6);
        }

        /* HUD Hub: Enlarged QR */
        .top-right-hub { position: absolute; top: 20px; right: 40px; display: flex; flex-direction: column; align-items: flex-end; gap: 15px; z-index: 100; }
        .qr-box { 
            background: white; padding: 6px; border-radius: 6px; 
            filter: drop-shadow(0 0 15px rgba(160, 32, 240, 0.8)); 
        }
        .qr-box img { width: 100px; height: 100px; display: block; }

        /* Trophy Panel: Purple Borders */
        #trophy-panel { 
            position: absolute; right: 40px; top: 160px; 
            display: flex; flex-direction: column; gap: 10px; z-index: 100; 
        }
        .trophy-row { display: flex; align-items: center; gap: 8px; animation: fadeIn 0.5s forwards; }
        .icon-box { 
            background: rgba(0,0,0,0.9); border: 2px solid #A020F0; 
            padding: 10px; border-radius: 6px; 
            display: flex; align-items: center; justify-content: center;
            width: 70px; height: 70px;
            box-shadow: 0 0 10px rgba(160, 32, 240, 0.4);
        }
        #go-box { border: 2px solid #FFD700; box-shadow: 0 0 15px #FFD700; }
        .icon-box .emoji { font-size: 35px; }

        .shady-box {
            background: rgba(0,0,0,0.6); 
            border: 1px solid rgba(160, 32, 240, 0.4);
            border-radius: 4px; width: 120px; height: 50px;
        }

        /* Branding Footer: Purple Hue Around Logo and Title */
        .brand-footer { position: absolute; bottom: 60px; right: 40px; display: flex; align-items: center; gap: 20px; z-index: 100; }
        #game-name-display { 
            font-size: 28px; font-weight: 900; color: white; text-transform: uppercase; 
            text-shadow: 0 0 15px #A020F0; text-align: right;
        }
        .main-logo { 
            height: 110px; width: 110px; border-radius: 50%; 
            border: 4px solid #A020F0; background: #000; 
            filter: drop-shadow(0 0 20px rgba(160, 32, 240, 0.9));
            object-fit: cover; 
        }

        /* Chat Ticker: Purple Accent */
        #chat-ticker-container {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 40px;
            background: rgba(0, 0, 0, 0.8); border-top: 2px solid #A020F0;
            overflow: hidden; z-index: 1000; display: flex; align-items: center;
        }
        .ticker-message { position: absolute; white-space: nowrap; color: white; font-size: 20px; font-weight: 900; display: flex; gap: 10px; }

        /* Bouncing Emojis */
        #bounce-container { position: absolute; inset: 0; pointer-events: none; z-index: 9999; overflow: hidden; }
        .bouncing-emoji { position: absolute; font-size: 50px; filter: drop-shadow(0 0 15px #A020F0); }

        @keyframes fadeIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
    </style>
</head>
<body>

    <div id="bounce-container"></div>

    <div id="tribute-bar">
        <img src="https://upload.wikimedia.org/wikipedia/en/a/a4/Flag_of_the_United_States.svg" alt="US Flag">
        <span>IN HONOR OF OLDMAN - JAN, 2026</span>
        <img src="https://upload.wikimedia.org/wikipedia/en/a/a4/Flag_of_the_United_States.svg" alt="US Flag">
    </div>

    <div class="top-right-hub">
        <div class="qr-box">
            <img src="https://api.qrserver.com/v1/create-qr-code/?size=100x100&data=https://www.amazon.com/gp/goldbox?tag=werewolf3788-20" alt="Amazon QR">
        </div>
    </div>

    <div id="trophy-panel">
        <div class="trophy-row"><div id="go-box" class="icon-box"><span class="emoji">ðŸ‘‘</span></div><div class="shady-box"></div></div>
        <div class="trophy-row"><div class="icon-box"><span class="emoji">ðŸ’Ž</span></div><div class="shady-box"></div></div>
        <div class="trophy-row"><div class="icon-box"><span class="emoji">ðŸ¥‡</span></div><div class="shady-box"></div></div>
        <div class="trophy-row"><div class="icon-box"><span class="emoji">ðŸ¥ˆ</span></div><div class="shady-box"></div></div>
        <div class="trophy-row"><div class="icon-box"><span class="emoji">ðŸ¥‰</span></div><div class="shady-box"></div></div>
    </div>

    <div class="brand-footer">
        <div id="game-name-display">FETCHING GAME DATA...</div>
        <img src="https://raw.githubusercontent.com/KFruti88/Universal-Stream-Overlay/main/images/terrdog420.png" class="main-logo">
    </div>

    <div id="chat-ticker-container"></div>

    <script src="https://cdn.jsdelivr.net/npm/comfy.js@latest/dist/comfy.min.js"></script>
    <script>
        const twitchUser = "terrdog420";
        const guestUser = "unicornbunnyshiver";

        /**
         * Dynamic Game Data Fetching
         */
        async function updateGameData() {
            try {
                const response = await fetch(`https://decapi.me/twitch/game/${twitchUser}`);
                const game = await response.text();
                document.getElementById('game-name-display').innerText = game.toUpperCase();
            } catch (e) {
                document.getElementById('game-name-display').innerText = "STREAM OFFLINE";
            }
        }

        /**
         * Chat Ticker Logic
         */
        function addTickerMessage(user, message, color) {
            const container = document.getElementById('chat-ticker-container');
            const msgEl = document.createElement('div');
            msgEl.className = 'ticker-message';
            msgEl.innerHTML = `<span style="color: ${color || '#A020F0'}">${user.toUpperCase()}:</span> <span>${message}</span>`;
            let posX = window.innerWidth;
            container.appendChild(msgEl);
            function scroll() {
                posX -= 3;
                msgEl.style.transform = `translateX(${posX}px)`;
                if (posX > -msgEl.offsetWidth) requestAnimationFrame(scroll);
                else msgEl.remove();
            }
            scroll();
        }

        /**
         * Special Guest Bounce Effects (unicornbunnyshiver)
         */
        function spawnBouncingEmoji() {
            const container = document.getElementById('bounce-container');
            const el = document.createElement('div');
            el.className = 'bouncing-emoji';
            el.innerText = Math.random() > 0.5 ? "ðŸ¦„" : "ðŸ‡";
            let px = -50, py = Math.random() * (window.innerHeight - 150), sx = 5 + Math.random() * 5, sy = (Math.random() - 0.5) * 10, g = 0.2;
            container.appendChild(el);
            function anim() {
                px += sx; sy += g; py += sy;
                if (py + 60 > window.innerHeight - 40) { py = window.innerHeight - 100; sy *= -0.8; }
                el.style.transform = `translate(${px}px, ${py}px)`;
                if (px < window.innerWidth + 100) requestAnimationFrame(anim);
                else el.remove();
            }
            anim();
        }

        /**
         * Temporal Visibility Logic (January Only)
         */
        function updateHUD() {
            const now = new Date();
            const isJanuary = (now.getMonth() === 0);
            document.getElementById('tribute-bar').style.display = isJanuary ? 'flex' : 'none';
        }

        ComfyJS.onChat = (user, msg, flags, self, extra) => {
            if (self) return;
            addTickerMessage(user, msg, extra.userColor);
            if (user.toLowerCase() === guestUser) {
                for (let i = 0; i < 15; i++) setTimeout(spawnBouncingEmoji, i * 150);
            }
        };

        // Initialize HUD and APIs
        setInterval(updateHUD, 1000);
        setInterval(updateGameData, 60000);
        updateHUD();
        updateGameData();
        ComfyJS.Init(twitchUser);
    </script>
</body>
</html>