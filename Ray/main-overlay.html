<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <style>
        @import url(https://fonts.googleapis.com/css?family=Roboto:700,900);
        * { box-sizing: border-box; }
        html, body { height: 100%; width: 100%; margin: 0; padding: 0; overflow: hidden; background: transparent; font-family: 'Roboto', sans-serif; }

        /* SHINING TRIBUTE BAR */
        #tribute-bar {
            position: absolute; top: 0; left: 50%; transform: translateX(-50%);
            display: none; align-items: center; gap: 20px;
            background: linear-gradient(180deg, rgba(30,30,30,0.98) 0%, rgba(0,0,0,0.95) 100%); 
            padding: 12px 40px; border-bottom: 4px solid #FFD700; border-radius: 0 0 20px 20px;
            color: white; z-index: 1000; box-shadow: 0 0 20px rgba(255, 215, 0, 0.4);
            overflow: hidden;
        }
        #tribute-bar::after {
            content: ""; position: absolute; top: 0; left: -100%; width: 50%; height: 100%;
            background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.2), transparent);
            transform: skewX(-25deg); animation: shine 4s infinite;
        }
        @keyframes shine { 100% { left: 200%; } }

        /* HUD & BRANDING */
        .top-right-hub { position: absolute; top: 20px; right: 40px; display: flex; flex-direction: column; align-items: flex-end; gap: 10px; z-index: 100; }
        .info-pill { background: rgba(0,0,0,0.85); border-right: 6px solid #a020f0; padding: 8px 22px; color: white; font-weight: 900; border-radius: 4px; display: flex; align-items: center; gap: 15px; transition: border-color 0.4s; }
        .brand-footer { position: absolute; bottom: 30px; right: 40px; display: flex; align-items: center; gap: 20px; z-index: 100; }
        .text-stack { display: flex; flex-direction: column; align-items: flex-end; gap: 8px; width: 400px; }
        #shoutout-display { background: rgba(0,0,0,0.8); border-left: 4px solid #a020f0; padding: 10px 15px; color: white; font-size: 15px; text-align: center; border-radius: 4px; width: 100%; font-weight: 700; transition: border-color 0.4s; }
        #game-name-display { font-size: 26px; font-weight: 900; color: white; text-transform: uppercase; }
        .main-logo { height: 110px; width: 110px; transition: filter 0.4s; }

        /* ASSET CRAWLER */
        #crawler-layer { position: absolute; width: 100%; height: 100%; top: 0; left: 0; pointer-events: none; z-index: 1; }
        .crawler-asset { position: absolute; pointer-events: none; filter: drop-shadow(0 0 8px rgba(0,0,0,0.6)); opacity: 0; font-size: 45px; }
        @keyframes driftHorizontal {
            0% { left: -80px; opacity: 0; }
            15% { opacity: 0.7; }
            85% { opacity: 0.7; }
            100% { left: 105%; opacity: 0; transform: translateY(40px); }
        }

        /* CHAT LOG */
        #log { position: absolute; bottom: 30px; left: 40px; width: 350px; display: table; table-layout: fixed; z-index: 100; }
        .chat-row { display: table-row; }
        .meta { width: 40%; text-align: right; padding: 8px 10px; background: rgba(0,0,0,0.5); border-left: 4px solid #a020f0; color: white; font-weight: 900; transition: border-color 0.4s; }
        .message { width: 60%; padding: 8px 10px; background: rgba(0,0,0,0.5); color: white; word-wrap: break-word; font-weight: 700; }
    </style>
</head>
<body>

<div id="tribute-bar">
    <img src="https://upload.wikimedia.org/wikipedia/en/a/a4/Flag_of_the_United_States.svg" style="height:20px;">
    <span style="letter-spacing:2px; font-weight:900;">IN HONOR OF OLDMAN - FEB, 2025</span>
    <img src="https://upload.wikimedia.org/wikipedia/en/a/a4/Flag_of_the_United_States.svg" style="height:20px;">
</div>

<div id="crawler-layer"></div>

<div class="top-right-hub">
    <div class="info-pill" id="theme-pill"><span id="game-icon">üêæ</span><span id="local-time">--:--</span><span>| CST</span></div>
    <div style="background: white; padding: 4px; border-radius: 4px;"><img src="https://api.qrserver.com/v1/create-qr-code/?size=60x60&data=https://www.amazon.com/gp/goldbox?tag=werewolf3788-20"></div>
</div>

<div class="brand-footer">
    <div class="text-stack">
        <div id="game-name-display">SYNCING...</div>
        <div id="shoutout-display">Scan the QR code to support the Pack! üõí</div>
    </div>
    <img src="https://raw.githubusercontent.com/KFruti88/Universal-Stream-Overlay/main/images/Transparent%20Dark%20Terror.png" class="main-logo" id="brand-logo">
</div>

<div id="log"></div>

<script>
    const config = {
        user: "terrdog420",
        timezone: "America/Chicago",
        memorialGames: ["red dead", "hunter", "division"],
        shoutouts: ["Go follow @werewolf3788! üê∫", "Check out @mjolnirgaming! ‚ö°", "Support the Pack! Scan the QR! üõí"],
        gameThemes: {
            "hunter": { color: "#228B22", icon: "üå≤", assets: ["ü¶å", "üå≤", "üêæ"] },
            "red dead": { color: "#b22234", icon: "ü§†", assets: ["üêé", "üåµ", "ü§†"] },
            "division": { color: "#FFA500", icon: "‚ò£Ô∏è", assets: ["‚ò£Ô∏è", "üèôÔ∏è", "üî´"] },
            "default": { color: "#a020f0", icon: "üêæ", assets: ["üêæ", "üéÆ", "üíú"] }
        }
    };

    let activeTheme = config.gameThemes.default;

    async function update() {
        try {
            const res = await fetch(`https://decapi.me/twitch/game/${config.user}?v=${Date.now()}`);
            const game = (await res.text()).toLowerCase();
            document.getElementById('game-name-display').innerText = game.toUpperCase();

            // Dynamic Theme Switching
            activeTheme = config.gameThemes.default;
            for(let key in config.gameThemes) { 
                if(game.includes(key)) { activeTheme = config.gameThemes[key]; break; } 
            }

            const c = activeTheme.color;
            document.getElementById('theme-pill').style.borderRightColor = c;
            document.getElementById('game-icon').innerText = activeTheme.icon;
            document.getElementById('brand-logo').style.filter = `drop-shadow(0 0 12px ${c})`;
            document.getElementById('shoutout-display').style.borderLeftColor = c;
            document.getElementById('game-name-display').style.textShadow = `0 0 10px #000, 0 0 5px ${c}`;
            
            document.getElementById('tribute-bar').style.display = config.memorialGames.some(k => game.includes(k)) ? "flex" : "none";
        } catch (e) {}
    }

    function spawn() {
        const layer = document.getElementById('crawler-layer');
        const asset = document.createElement('div');
        asset.className = 'crawler-asset';
        asset.innerText = activeTheme.assets[Math.floor(Math.random() * activeTheme.assets.length)];
        asset.style.top = Math.random() * 70 + 15 + "%";
        const dur = Math.random() * 5000 + 8000;
        asset.style.animation = `driftHorizontal ${dur}ms linear forwards`;
        layer.appendChild(asset); 
        setTimeout(() => asset.remove(), dur + 100);
    }

    document.addEventListener('onEventReceived', function (obj) {
        if (obj.detail.listener !== "message-receive") return;
        const data = obj.detail.event.data;
        const log = document.getElementById('log');
        const row = document.createElement('div');
        row.className = "chat-row";
        row.innerHTML = `<span class="meta" style="border-left-color: ${activeTheme.color}"><span style="color: ${data.color || '#FFF'}">${data.displayName}</span></span><span class="message">${data.text}</span>`;
        log.appendChild(row); 
        if (log.children.length > 8) log.removeChild(log.children[0]);
    });

    setInterval(update, 30000); update();
    setInterval(spawn, 15000);
    setInterval(() => {
        document.getElementById('local-time').innerText = new Date().toLocaleTimeString('en-US', { hour:'2-digit', minute:'2-digit', timeZone: config.timezone });
    }, 1000);
</script>
</body>
</html>